(function(){var t=function(n,t){return function(){return n.apply(t,arguments)}},i=function(n,t){function u(){this.constructor=n}for(var i in t)r.call(t,i)&&(n[i]=t[i]);return u.prototype=t.prototype,n.prototype=new u,n.__super__=t.prototype,n},r={}.hasOwnProperty,n=[].indexOf||function(n){for(var t=0,i=this.length;t<i;t++)if(t in this&&this[t]===n)return t;return-1};define(function(r){var o,s,h,f,c,u,v,l,a,y,e,p;return l=r("nav"),s=r("durandal/app"),u=r("i18next"),v=r("komapping"),p=r("toastr"),h=r("base/base-view-model"),c=r("brand/translation-manager/model/add-content-translation-model"),y=r("security/security"),f=r("config"),a=function(){return $("#translation-grid").trigger("reload")},e=function(n){return s.showMessage(n,u.t("app:contenttranslation.messages.validationError",[u.t("common.close")],!1,{style:{width:"350px"}}))},o=function(r){function o(){this.activate=t(this.activate,this);o.__super__.constructor.apply(this,arguments);this.SavePath=f.adminApi("ContentTranslation/CreateContentTranslation");this.contentType("application/json");jQuery.ajaxSettings.traditional=!0;this.translationId=ko.observable();this.language=ko.observable();this.language.subscribe(function(n){return function(t){var i;return n.translation(function(){var n,f,r,u;for(r=this.Model.translations(),u=[],n=0,f=r.length;n<f;n++)i=r[n],i.language===t&&u.push(i.translation);return u}.call(n)[0])}}(this));this.translation=ko.observable().extend({required:!0,minLength:1,maxLength:200});this.isTranslationAdded=ko.computed(function(t){return function(){var i,u,f,e,o,r;return i=(u=t.Model)!=null?u.translations().map(function(n){return n.language}):void 0,r=(f=t.Model)!=null?f.translations().map(function(n){return n.translation}):void 0,console.log(i),console.log(r),i!=null&&r!=null&&(e=t.language(),n.call(i,e)>=0)&&(o=t.translation(),n.call(r,o)>=0)}}(this));this.addBtnText=ko.computed(function(t){return function(){var f,i,e,o,s,h,r;return i=(e=t.Model)!=null?e.translations().map(function(n){return n.language}):void 0,r=(o=t.Model)!=null?o.translations().map(function(n){return n.translation}):void 0,console.log(i),console.log(r),console.log(t.language()),console.log(t.translation()),f=i!=null&&r!=null&&(s=t.language(),n.call(i,s)>=0)&&(h=t.translation(),n.call(r,h)>=0),f?u.t("app:common.edit"):u.t("app:common.add")}}(this));this.compositionComplete=function(n){return function(){return $(function(){return $("#add-translations-grid").on("gridLoad selectionChange",function(t,i){return n.translationId(i.id),n.language(i.data.language),n.translation(i.data.translation)})})}}(this)}return i(o,r),o.prototype.onsave=function(){return a(),this.success(u.t("app:contenttranslation.messages.translationSuccessfullyCreated")),l.title(u.t("app:contenttranslation.viewTranslation")),this.readOnly(!0)},o.prototype.onfail=function(n){return e(n.data)},o.prototype.clear=function(){return o.__super__.clear.apply(this,arguments)},o.prototype.addTranslation=function(){var t,n;if(!this.translation.isValid()){e("Translation is required");return}return t=function(){var t,u,i,r;for(i=this.Model.translations(),r=[],t=0,u=i.length;t<u;t++)n=i[t],n.language===this.language()&&r.push(n);return r}.call(this)[0],t!=null?(t.translation=this.translation(),n=this.translation(),this.Model.translations.valueHasMutated(),this.translation(n)):(n=this.translation(),this.Model.translations.push({language:this.language(),translation:n}),this.translation(n))},o.prototype.deleteTranslation=function(){return this.Model.translations.remove(this.Model.translations()[this.translationId()-1])},o.prototype.activate=function(){return o.__super__.activate.apply(this,arguments),this.Model=new c,this.language(null),this.translation(null),$.get(f.adminApi("ContentTranslation/GetContentTranslationAddData")).done(function(n){return function(t){return n.Model.languages(t.languages)}}(this))},o}(h),new o})}).call(this);
//# sourceMappingURL=add-translation.min.js.map
