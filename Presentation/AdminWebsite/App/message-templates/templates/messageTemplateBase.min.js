(function(){var n=function(n,t){return function(){return n.apply(t,arguments)}};define(["plugins/dialog","nav","komapping","i18next","message-templates/messageTemplatesCommon"],function(t,i,r,u,f){return function(){function t(){this.processResponse=n(this.processResponse,this);this.submit=n(this.submit,this);this.activate=n(this.activate,this);this.Id=ko.observable();this.Name=ko.observable().extend({required:f.requireValidator,pattern:f.nameValidator,maxLength:f.maxCharsNameValidator});this.Content=ko.observable().extend({required:f.requireValidator});this.TypeId=ko.observable();this.types=ko.observableArray();this.serverErrors=ko.observable();this.errors=ko.validation.group(this)}return t.prototype.activate=function(){return $.get("messagetemplate/types").done(function(n){return function(t){return n.types(t.Types)}}(this))},t.prototype.cancel=function(){return i.close()},t.prototype.submit=function(n){var t,i,u;return this.isValid()?(i=function(n){var t;return t=n.toString().charAt(0),t===t.toLowerCase()&&t!==t.toUpperCase()},u=JSON.parse(r.toJSON(this,{ignore:function(){var n=[];for(t in this)i(t)&&n.push(t.toString());return n}.call(this)})),$.ajax({type:"POST",url:n,data:postJson(u),dataType:"json",traditional:!0}).done(function(n){return function(t){return n.processResponse(t)}}(this))):this.errors.showAllMessages()},t.prototype.processResponse=function(n){return n.Success?(this.cancel(),$("#message-template-grid").trigger("reload")):n.Message===void 0?n.Errors.forEach(function(n){return function(t){return f.setError(n[t.PropertyName],t.ErrorMessage)}}(this)):this.serverErrors([n.Message])},t}()})}).call(this);
/*
//# sourceMappingURL=messageTemplateBase.min.js.map
*/