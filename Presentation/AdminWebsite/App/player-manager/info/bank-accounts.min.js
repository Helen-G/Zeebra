(function(){define(["i18next","security/security","nav"],function(n,t,i){return function(){function r(){this.playerId=ko.observable();this.bankAccountsSelectedRowId=ko.observable();this.bankAccountData=ko.observable();this.hasEditBankAccountsPermission=ko.computed(function(){return t.isOperationAllowed(t.permissions.edit,t.categories.playerBankAccount)});this.hasAddBankAccountsPermission=ko.computed(function(){return t.isOperationAllowed(t.permissions.add,t.categories.playerBankAccount)});this.canSetCurrentBankAccount=ko.computed(function(n){return function(){var t;return(t=n.bankAccountsSelectedRowId(),!t)?!1:n.bankAccountData()?n.bankAccountData().IsCurrent!=="Yes":!1}}(this));this.gridId=null}return r.prototype.activate=function(n){return this.playerId(n.playerId)},r.prototype.attached=function(n){var i,t;t=this;i=findGrid(n);return $(n).on("click",".jqgrow",function(){var n;return t.bankAccountsSelectedRowId($(this).attr("id")),n=i.find(".ui-jqgrid-btable"),t.gridId=n.attr("id"),t.bankAccountData(n.jqGrid("getRowData",t.bankAccountsSelectedRowId()))})},r.prototype.openAddBankAccountForm=function(t){return i.open({path:"payments/player-bank-accounts/edit",title:n.t("app:banks.newAccount"),data:{playerInfo:this,playerId:t.playerId(),naming:{gridBodyId:this.gridId}}})},r.prototype.openEditBankAccountForm=function(){return i.open({path:"payments/player-bank-accounts/edit",title:n.t("app:banks.editAccount"),data:{playerInfo:this,id:this.bankAccountsSelectedRowId(),naming:{gridBodyId:this.gridId}}})},r.prototype.openViewBankAccountForm=function(){return i.open({path:"payments/player-bank-accounts/edit",title:n.t("app:banks.viewAccount"),data:{playerInfo:this,id:this.bankAccountsSelectedRowId(),isView:!0,naming:{gridBodyId:this.gridId}}})},r.prototype.setCurrentBankAccount=function(){var t;return t=this,$.ajax("PlayerManager/SetCurrentBankAccount?id="+this.bankAccountsSelectedRowId()).done(function(i){var e,r,u,f;return r=void 0,u=void 0,f=void 0,i.result==="success"?(r=!0,u=n.t("app:payment.successfulySetCurrentBankAccount"),f="alert-success"):(r=!1,e=JSON.parse(i.fields[0].errors[0]),u=n.t(e.text),f="alert-danger"),dialogSetCurrentBankAccount.show(n.t("app:payment.settingCurrentBankAccount"),u,f),r?($("#"+t.gridId).trigger("reloadGrid"),t.bankAccountsSelectedRowId(null)):void 0})},r}()})}).call(this);
//# sourceMappingURL=bank-accounts.min.js.map
