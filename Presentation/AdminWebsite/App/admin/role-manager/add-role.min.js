(function(){var t=function(n,t){return function(){return n.apply(t,arguments)}},i=function(n,t){function u(){this.constructor=n}for(var i in t)r.call(t,i)&&(n[i]=t[i]);return u.prototype=t.prototype,n.prototype=new u,n.__super__=t.prototype,n},r={}.hasOwnProperty,n=[].indexOf||function(n){for(var t=0,i=this.length;t<i;t++)if(t in this&&this[t]===n)return t;return-1};define(function(r){var f,e,o,u,l,s,a,h,c,v;return s=r("nav"),l=r("komapping"),u=r("i18next"),v=r("toastr"),e=r("base/base-view-model"),h=r("admin/role-manager/model/role-model"),o=r("admin/role-manager/helpers/grid-helper"),c=r("security/security"),r("controls/grid"),a=function(){return $("#role-list").trigger("reload")},f=function(r){function f(){this.onsave=t(this.onsave,this);this.compositionComplete=t(this.compositionComplete,this);f.__super__.constructor.apply(this,arguments);this.SavePath="/RoleManager/CreateRole";jQuery.ajaxSettings.traditional=!0;this.gridHelper=new o}return i(f,r),f.prototype.clear=function(){return f.__super__.clear.apply(this,arguments),this.gridHelper.reset()},f.prototype.activate=function(){return f.__super__.activate.apply(this,arguments),console.log("activate"),this.Model=new h,this.Model.checkedPermissions.subscribe(function(n){return function(){return n.gridHelper.reload()}}(this)),$.get("/RoleManager/GetEditData").done(function(t){return function(i){return t.Model.licensees(i.licensees),t.Model.isLicenseeLocked()?(t.Model.assignedLicensees(c.licensees()),t.Model.displayLicensees(i.licensees.filter(function(i){var r;return r=i.id,n.call(t.Model.assignedLicensees(),r)>=0}).map(function(n){return n.name}).join(", "))):t.Model.displayLicensees(t.Model.licensees().filter(function(i){var r;return r=i.id,n.call(t.Model.assignedLicensees(),r)>=0}).map(function(n){return n.name}).join(", "))}}(this))},f.prototype.compositionComplete=function(){return this.gridHelper.init($("#security-grid")),$(function(n){return function(){return n.collapseGrid(),$("#permission-search-button").click(function(){return n.gridHelper.filter($("#permission-search").val()),!1})}}(this))},f.prototype.expandGrid=function(){return $(".treeclick.ui-icon-triangle-1-e").click()},f.prototype.collapseGrid=function(){return $(".treeclick.ui-icon-triangle-1-s:not(:first)").click()},f.prototype.beforesave=function(){return this.Model.checkedPermissions(this.gridHelper.getChecked()),!0},f.prototype.onsave=function(){return this.success(u.t("app:admin.messages.roleSuccessfullyCreated")),this.Model.displayLicensees(this.Model.licensees().filter(function(t){return function(i){var r;return r=i.id,n.call(t.Model.assignedLicensees(),r)>=0}}(this)).map(function(){return function(n){return n.name}}(this)).join(", ")),s.title(u.t("app:admin.roleManager.viewRole")),$("#role-grid").trigger("reload"),this.readOnly(!0)},f}(e),new f})}).call(this);
//# sourceMappingURL=add-role.min.js.map
