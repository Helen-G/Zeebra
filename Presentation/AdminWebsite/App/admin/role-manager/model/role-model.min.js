(function(){var n=function(n,i){function u(){this.constructor=n}for(var r in i)t.call(i,r)&&(n[r]=i[r]);return u.prototype=i.prototype,n.prototype=new u,n.__super__=i.prototype,n},t={}.hasOwnProperty,i=[].indexOf||function(n){for(var t=0,i=this.length;t<i;t++)if(t in this&&this[t]===n)return t;return-1};define(function(t){var f,u,r,e;return e=t("komapping"),r=t("i18next"),f=t("controls/assign"),u=t("base/base-model"),t("utils"),function(u){function f(){var n;f.__super__.constructor.apply(this,arguments);this.code=this.makeField().extend({required:!0,minLength:1,maxLength:12}).extend({pattern:{message:r.t("admin.messages.roleCodeInvalid"),params:"^[A-Za-z0-9]+(?:[._'-][A-Za-z0-9]+)*$"}});this.name=this.makeField().extend({required:!0,minLength:1,maxLength:20}).extend({pattern:{message:r.t("admin.messages.roleNameInvalid"),params:"^[A-Za-z0-9]+(?:[._'-][A-Za-z0-9]+)*$"}});this.description=this.makeField();this.roles=ko.observableArray();this.roleId=this.makeField();this.roleId.subscribe(function(n){return function(t){if(t!=null)return $.get("/RoleManager/GetRole",{id:t}).done(function(t){return n.checkedPermissions(t.checkedPermissions)})}}(this));this.licensees=ko.observableArray();this.assignedLicensees=this.makeArrayField().extend({validation:{validator:function(){return function(n){return(n!=null?n.length:void 0)>0}}(this),message:r.t("admin.messages.licenseesRequired"),params:!0}});this.displayLicensees=ko.observable();this.assignedLicensees.subscribe(function(n){return function(t){if(t!=null)return $.get("/RoleManager/GetLicenseeData",{licensees:t}).done(function(t){return n.roles(t.roles)})}}(this));this.checkedPermissions=ko.observableArray();n=t("security/security");this.isLicenseeLocked=ko.computed(function(){return function(){return n.licensees()!=null&&n.licensees().length>0&&!n.isSuperAdmin()}}(this));this.selectedModules=ko.computed({read:function(t){return function(){var r;return r=n.operations().filter(function(n){var r;return r=n.id,i.call(t.checkedPermissions(),r)>=0}),r.unique(function(n){return n.module}).map(function(n){return{id:Math.random(),name:n.module,permissions:r.filter(function(t){return t.module===n.module}).map(function(n){return n.name}).join("\n")}})}}(this)})}return n(f,u),f}(u)})}).call(this);
//# sourceMappingURL=role-model.min.js.map
