(function(){var n=function(n,t){return function(){return n.apply(t,arguments)}},i=function(n,t){function u(){this.constructor=n}for(var i in t)r.call(t,i)&&(n[i]=t[i]);return u.prototype=t.prototype,n.prototype=new u,n.__super__=t.prototype,n},r={}.hasOwnProperty,t=[].indexOf||function(n){for(var t=0,i=this.length;t<i;t++)if(t in this&&this[t]===n)return t;return-1};define(function(r){var f,e,o,u,l,s,h,c,a;return s=r("nav"),l=r("komapping"),u=r("i18next"),a=r("toastr"),e=r("base/base-view-model"),c=r("admin/role-manager/model/role-model"),o=r("admin/role-manager/helpers/grid-helper"),r("controls/grid"),h=function(){return $("#role-grid").trigger("reload")},f=function(r){function f(){this.onsave=n(this.onsave,this);this.compositionComplete=n(this.compositionComplete,this);f.__super__.constructor.apply(this,arguments);this.SavePath="/RoleManager/UpdateRole";jQuery.ajaxSettings.traditional=!0;this.gridHelper=new o}return i(f,r),f.prototype.setup=function(n){return console.log("data"),console.log(n),this.Model.mapfrom(n.role),this.Model.licensees(n.licensees),this.Model.displayLicensees(this.Model.licensees().filter(function(n){return function(i){var r;return r=i.id,t.call(n.Model.assignedLicensees(),r)>=0}}(this)).map(function(){return function(n){return n.name}}(this)).join(", "))},f.prototype.compositionComplete=function(){return this.gridHelper.init($("#security-grid")),$(function(n){return function(){return n.collapseGrid(),$("#permission-search-button").click(function(){return n.gridHelper.filter($("#permission-search").val()),!1})}}(this))},f.prototype.expandGrid=function(){return $(".treeclick.ui-icon-triangle-1-e").click()},f.prototype.collapseGrid=function(){return $(".treeclick.ui-icon-triangle-1-s:not(:first)").click()},f.prototype.isPermissionChecked=function(n){return this.Model.checkedPermissions().indexOf(n)},f.prototype.beforesave=function(){return this.Model.checkedPermissions(this.gridHelper.getChecked()),!0},f.prototype.onsave=function(){return h(),this.success(u.t("app:admin.messages.roleSuccessfullyUpdated")),s.title(u.t("app:admin.roleManager.viewRole")),this.Model.displayLicensees(this.Model.licensees().filter(function(n){return function(i){var r;return r=i.id,t.call(n.Model.assignedLicensees(),r)>=0}}(this)).map(function(){return function(n){return n.name}}(this)).join(", ")),this.readOnly(!0)},f.prototype.activate=function(n){var t;return f.__super__.activate.apply(this,arguments),this.Model=new c,t=n.id,$.get("/RoleManager/GetEditData",{id:t}).done(function(n){return function(t){return n.setup(t)}}(this))},f.prototype.clear=function(){return f.__super__.clear.apply(this,arguments),this.gridHelper.reset()},f}(e),new f})}).call(this);
//# sourceMappingURL=edit-role.min.js.map
