(function(){var n=function(n,t){return function(){return n.apply(t,arguments)}};define(["nav","i18next","security/security","bonus/bonus-manager/activate-dialog","shell","bonus/bonusCommon","controls/grid"],function(t,i,r,u,f,e){return function(){function o(){this.detached=n(this.detached,this);this.compositionComplete=n(this.compositionComplete,this);this.shell=f;this.bonusId=ko.observable(null);this.bonusDescription=ko.observable();this.isActivateEnabled=ko.observable(!1);this.isDeactivateEnabled=ko.observable(!1);this.search=ko.observable("");this.selectedBrands=ko.computed(function(){return f.selectedBrandsIds()})}return o.prototype.typeFormatter=function(){return e.typeFormatter(this.Type)},o.prototype.issuanceModeFormatter=function(){return e.issuanceModeFormatter(this.Mode)},o.prototype.statusFormatter=function(){return i.t("bonus.bonusStatuses."+this.IsActive)},o.prototype.isAddBtnVisible=ko.computed(function(){return r.isOperationAllowed(r.permissions.add,r.categories.bonusManager)}),o.prototype.isEditBtnVisible=ko.computed(function(){return r.isOperationAllowed(r.permissions.edit,r.categories.bonusManager)}),o.prototype.isViewBtnVisible=ko.computed(function(){return r.isOperationAllowed(r.permissions.view,r.categories.bonusManager)}),o.prototype.isActivateBtnVisible=ko.computed(function(){return r.isOperationAllowed(r.permissions.activate,r.categories.bonusManager)}),o.prototype.isDeactivateBtnVisible=ko.computed(function(){return r.isOperationAllowed(r.permissions.deactivate,r.categories.bonusManager)}),o.prototype.openAddBonusTab=function(){return t.open({path:"bonus/bonus-manager/add-edit-bonus",title:i.t("bonus.bonusManager.new")})},o.prototype.openEditBonusTab=function(){if(this.bonusId())return t.open({path:"bonus/bonus-manager/add-edit-bonus",title:i.t("bonus.bonusManager.edit"),data:{id:this.bonusId()}})},o.prototype.openViewBonusTab=function(){if(this.bonusId())return t.open({path:"bonus/bonus-manager/view-bonus",title:i.t("bonus.bonusManager.view"),data:{id:this.bonusId()}})},o.prototype.showModalDialog=function(n){var t;return t=new u(this.bonusId(),this.bonusDescription()),t.show(n)},o.prototype.reloadGrid=function(){return $("#bonus-grid").trigger("reload")},o.prototype.compositionComplete=function(){$("#bonus-grid").on("gridLoad selectionChange",function(n){return function(t,i){return n.bonusId(i.id),i.data.BrandId!==""?(n.isActivateEnabled(i.data.IsActive==="Inactive"&&n.bonusId()!=null),n.isDeactivateEnabled(i.data.IsActive==="Active"&&n.bonusId()!=null)):(n.isActivateEnabled(!1),n.isDeactivateEnabled(!1)),n.bonusDescription(i.data.Description)}}(this));$("#bonus-search").submit(function(n){return function(){return n.search($("#bonus-name-search").val()),!1}}(this));return $(document).on("bonuses_changed",this.reloadGrid)},o.prototype.detached=function(){return $(document).off("bonuses_changed",this.reloadGrid)},o}()})}).call(this);
//# sourceMappingURL=list.min.js.map
