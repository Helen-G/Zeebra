(function(){var n=function(n,t){return function(){return n.apply(t,arguments)}};require(["i18next"],function(t){return function(){function i(){this.toggleTab=n(this.toggleTab,this);this.claimRedemption=n(this.claimRedemption,this);this.fetchRedemptions=n(this.fetchRedemptions,this);this.messages=ko.observableArray();this.redemptions=ko.observableArray();this.requestInProgress=ko.observable(!1);this.fetchingRedemptions=ko.observable(!1);this.fetchRedemptions();this.shownTab=ko.observable("claimBonus")}var r;return i.prototype.fetchRedemptions=function(){return this.fetchingRedemptions(!0),$.getJson("/api/GetBonusRedemptions").done(function(n){return function(i){return n.fetchingRedemptions(!1),n.redemptions(i.redemptions),i.redemptions.length===0?n.messages([t.t("app:claimBonus.noBonusToClaim")]):void 0}}(this)).fail(function(n){var i,r;return i=JSON.parse(n.responseText),this.messages([((r=i.errors[0])!=null?r.message:void 0)||t.t("app:common.unexpectedError")])})},i.prototype.claimRedemption=function(n){return this.requestInProgress(!0),this.messages([]),$.postJson("/api/ClaimBonusReward",{RedemptionId:n.id}).done(function(i){return function(){return i.redemptions.pop(n),i.messages([t.t("app:claimBonus.redemptionClaimedSuccessfully")])}}(this)).fail(function(n){var i;return i=JSON.parse(n.responseText),i.unexpected?this.messages([t.t("app:common.unexpectedError")]):this.messages([i.errors[0].message])}).always(function(n){return function(){return n.requestInProgress(!1)}}(this))},i.prototype.toggleTab=function(){var n;return n=event.target.hash.substr(1),this.shownTab(n)},r=new i,ko.applyBindings(r,document.getElementById("claim-bonus-wrapper")),i}()})}).call(this);
//# sourceMappingURL=claimBonusReward.min.js.map
