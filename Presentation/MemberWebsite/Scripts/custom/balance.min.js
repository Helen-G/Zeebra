(function(){var n=function(n,t){return function(){return n.apply(t,arguments)}};require(["i18next","offlineDeposit"],function(t,i){var u,r;return ko.validation.init({registerExtenders:!0},!0),u=function(){function r(){this.checkFundInQualification=n(this.checkFundInQualification,this);this.toggleTab=n(this.toggleTab,this);this.submitFundIn=n(this.submitFundIn,this);this.submitWithdrawalRequest=n(this.submitWithdrawalRequest,this);this.loadProfile=n(this.loadProfile,this);var u,t,r;u={Email:"Email",SMS:"SMS"};t={DoNotNotify:"Do not notify",Email:"Email",SMS:"SMS"};this.shownTab=ko.observable();this.currency=ko.observable("N/A");this.playerBankAccountId=ko.observable("");this.withdrawalAmount=ko.observable("").extend({formatDecimal:2,validatable:!0,required:!0,min:{message:"Entered amount must be greater than 0.",params:.01},max:{message:"Entered amount is bigger than allowed.",params:2147483647}});this.withdrawalNotificationMethods=ko.observableArray(function(){var n=[];for(r in t)n.push(t[r]);return n}());this.withdrawalNotificationMethod=ko.observable(t.DoNotNotify);this.withdrawalRequestInProgress=ko.observable(!1);this.withdrawalRequestSuccess=ko.observable(location.hash==="#withdrawalDetails/success");this.withdrawalRequestErrors=ko.observableArray([]);this.playerName=ko.observable("N/A");this.transferFundType=ko.observable();this.fundInWallet=ko.observable();this.fundInBonusCode=ko.observable();this.walletBalance=ko.observable("");this.fundInWallet.subscribe(function(n){return function(){return $.get("GetProductBalance",{walletId:n.fundInWallet()}).done(function(t){return n.walletBalance(t.main.toFixed(2))})}}(this));this.fundInAmount=ko.observable("").extend({formatDecimal:2,validatable:!0,required:!0,min:{message:"Entered amount must be greater than 0.",params:.01},max:{message:"Entered amount is bigger than allowed.",params:2147483647}});this.fundInRequestInProgress=ko.observable(!1);this.fundInSuccess=ko.observable(~location.hash.indexOf("#fundIn/success"));this.fundInTransferId=ko.observable(location.hash.substr(16));this.fundInQualificationSuccess=ko.observable(!1);this.fundInErrors=ko.observableArray([]);this.fundInQualificationEnabled=ko.computed(function(n){return function(){return n.transferFundType()==="FundIn"&&n.fundInRequestInProgress()===!1}}(this));$.extend(this,new i);$(window).on("hashchange",function(n){return function(){return n.toggleTab()}}(this));setTimeout(function(){return $("[type=number]").val("")})}return r.prototype.IsJsonString=function(n){var t;try{JSON.parse(n)}catch(i){return t=i,!1}return!0},r.prototype.loadProfile=function(){return $.getJson("/api/profile").done(function(n){return function(t){if(t.success)return n.currency(t.profile.currencyCode),n.playerName(""+t.profile.firstName+" "+t.profile.lastName)}}(this))},r.prototype.submitWithdrawalRequest=function(){var n,i,r;if(this.withdrawalRequestSuccess(!1),this.withdrawalRequestErrors([]),!this.withdrawalAmount.isValid()){this.withdrawalRequestErrors.push("Withdrawal failed. "+this.withdrawalAmount.error);return}return this.withdrawalRequestInProgress(!0),n=$("#playerBankAccountId").text(),i=$("#playerBankAccountTime").text(),r=$("#playerBankTime").text(),$.postJson("/api/offlineWithdrawal",{PlayerBankAccountId:n,Amount:this.withdrawalAmount(),NotificationType:this.withdrawalNotificationMethod(),BankTime:r,BankAccountTime:i}).done(function(){return function(){return location.href="#withdrawalDetails/success",location.reload()}}(this)).fail(function(n){return function(i){var u,r,f,o,e;if(r=JSON.parse(i.responseText),IsJsonString(r.message))return u=JSON.parse(r.message),n.withdrawalRequestErrors.push("Withdrawal failed. "+t.t(u.text,u.variables));if(r.unexpected)return n.withdrawalRequestErrors.push("Withdrawal failed. Unexpected error occurred.");for(e=r.errors,f=0,o=e.length;f<o;f++)u=e[f],n.withdrawalRequestErrors.push(u);if(r.errors.length===0&&r.message)return n.withdrawalRequestErrors.push("Withdrawal failed. "+t.t(r.message))}}(this)).always(function(n){return function(){return n.withdrawalRequestInProgress(!1)}}(this))},r.prototype.submitFundIn=function(){if(this.fundInSuccess(!1),this.fundInErrors([]),!this.fundInAmount.isValid()){this.fundInErrors.push("Withdrawal failed. "+this.fundInAmount.error);return}return this.fundInRequestInProgress(!0),$.postJson("/api/fundIn",{TransferFundType:this.transferFundType(),WalletId:this.fundInWallet(),Amount:this.fundInAmount(),BonusCode:this.fundInBonusCode()}).done(function(){return function(n){return location.href="#fundIn/success/"+n.transferId,location.reload()}}(this)).fail(function(n){return function(i){var e,r,u,o,f;if(r=JSON.parse(i.responseText),r.unexpected)return n.fundInErrors.push("Unexpected error occurred.");for(f=r.errors,u=0,o=f.length;u<o;u++)e=f[u],n.fundInErrors.push(e);if(r.errors.length===0&&r.message)return n.fundInErrors.push("Transfer failed. "+t.t(r.message))}}(this)).always(function(n){return function(){return n.fundInRequestInProgress(!1)}}(this))},r.prototype.toggleTab=function(){var n;return n=location.hash.substr(1)||"balance",~n.indexOf("/")&&(n=n.substr(0,n.indexOf("/"))),this.shownTab(n)},r.prototype.checkFundInQualification=function(){return this.fundInSuccess(!1),this.fundInQualificationSuccess(!1),this.fundInErrors([]),this.fundInRequestInProgress(!0),$.postJson("/api/qualifyFundInBonus",{WalletId:this.fundInWallet(),Amount:this.fundInAmount(),BonusCode:this.fundInBonusCode()}).done(function(n){return function(t){var f,i,e,r,u;if(t.errors.length===0)return n.fundInQualificationSuccess(!0);for(r=t.errors,u=[],i=0,e=r.length;i<e;i++)f=r[i],u.push(n.fundInErrors.push(f));return u}}(this)).fail(function(n){return function(t){var i;return i=JSON.parse(t.responseText),i.unexpected?n.fundInErrors.push(i.message):void 0}}(this)).always(function(n){return function(){return n.fundInRequestInProgress(!1)}}(this))},r}(),r=new u,r.loadProfile(),r.toggleTab(),r.errors=ko.validation.group(r),ko.applyBindings(r,document.getElementById("balance-information-wrapper"))})}).call(this);
//# sourceMappingURL=balance.min.js.map
