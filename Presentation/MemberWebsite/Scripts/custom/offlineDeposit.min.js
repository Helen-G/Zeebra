(function(){var n=function(n,t){return function(){return n.apply(t,arguments)}};define(function(t){var i;return i=t("i18next"),ko.validation.init({registerExtenders:!0},!0),function(){function t(){this.checkODQualification=n(this.checkODQualification,this);this.submitOfflineDeposit=n(this.submitOfflineDeposit,this);var t,i;t={Email:"Email",SMS:"SMS"};this.bankAccount=ko.observable();this.amount=ko.observable("").extend({formatDecimal:2,validatable:!0,required:!0,min:{message:"Entered amount must be greater than 0.",params:.01},max:{message:"Entered amount is bigger than allowed.",params:2147483647}});this.remarks=ko.observable("");this.offlineDepositBonusCode=ko.observable();this.notificationMethods=ko.observableArray(function(){var n=[];for(i in t)n.push(i);return n}());this.notificationMethod=ko.observable(t.Email);this.offlineDepositRequestInProgress=ko.observable(!1);this.offlineDepositSuccess=ko.observable(location.hash==="#offlineDeposit/success");this.ODQualificationSuccess=ko.observable(!1);this.offlineDepositErrors=ko.observableArray([]);setTimeout(function(){return $("[data-bind*='value: offlineDepositBonusCode']").focus(function(){return $(this).parents(".row").find("[type=radio]").prop("checked",!0).change()})})}return t.prototype.submitOfflineDeposit=function(n){if(this.offlineDepositSuccess(!1),this.offlineDepositErrors([]),!this.amount.isValid()){this.offlineDepositErrors.push(i.t("app:payment.deposit.depositFailed")+i.t(this.amount.error));return}return this.offlineDepositRequestInProgress(!0),$.postJson("/api/offlineDeposit",{BankAccountId:this.bankAccount(),Amount:this.amount(),NotificationMethod:this.notificationMethod(),PlayerRemarks:this.remarks(),BonusCode:this.offlineDepositBonusCode()}).done(function(){return function(){return n!=null&&typeof n=="function"?n():(location.href="#offlineDeposit/success",location.reload())}}(this)).fail(function(n){return function(t){return n.fail(JSON.parse(t.responseText))}}(this)).always(function(n){return function(){return n.offlineDepositRequestInProgress(!1)}}(this))},t.prototype.checkODQualification=function(){return this.ODQualificationSuccess(!1),this.offlineDepositSuccess(!1),this.offlineDepositErrors([]),this.offlineDepositRequestInProgress(!0),$.postJson("/api/qualifyDepositBonus",{Amount:this.amount(),BonusCode:this.offlineDepositBonusCode()}).done(function(n){return function(t){var f,i,e,r,u;if(t.errors.length===0)return n.ODQualificationSuccess(!0);for(r=t.errors,u=[],i=0,e=r.length;i<e;i++)f=r[i],u.push(n.offlineDepositErrors.push(f));return u}}(this)).fail(function(n){return function(t){return n.fail(JSON.parse(t.responseText))}}(this)).always(function(n){return function(){return n.offlineDepositRequestInProgress(!1)}}(this))},t.prototype.fail=function(n){var t,r,u,e,f;if(r="",IsJsonString(n.message)?(t=JSON.parse(n.message),r=i.t(t.text,t.variables)):r=i.t(n.message),n.unexpected||n.message)return this.offlineDepositErrors.push(i.t("app:payment.deposit.depositFailed")+r);for(f=n.errors,u=0,e=f.length;u<e;u++)t=f[u],this.offlineDepositErrors.push(t);if(n.errors.length===0&&n.message)return this.offlineDepositErrors.push(i.t("app:payment.deposit.depositFailed")+r)},t}()})}).call(this);
//# sourceMappingURL=offlineDeposit.min.js.map
